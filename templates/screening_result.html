<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Supplier Screening Result</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .box { border: 1px solid #ddd; padding: 15px; border-radius: 6px; margin-bottom: 20px; }
        .ok { color: green; font-weight: bold; }
        .warn { color: orange; font-weight: bold; }
        .bad { color: red; font-weight: bold; }
    </style>
</head>
<body>

<h1>üßæ Supplier Pre-Qualification</h1>

<div class="box">
    <p><b>Supplier:</b> {{ result.supplier_name }}</p>
    <p><b>Country:</b> {{ result.country }}</p>
    <p><b>Category:</b> {{ result.category }}</p>
</div>

<!-- ================= SCREENING ================= -->
<div class="box">
    <h2>1Ô∏è‚É£ Screening Result</h2>

    <p><b>Status:</b> {{ result.screening_status }}</p>
    <p><b>Score:</b> {{ result.pre_qualification_score }}</p>

    {% if result.pre_qualification_score >= 0.7 %}
        <p class="ok">‚úî Supplier passed pre-qualification</p>
    {% elif result.pre_qualification_score >= 0.4 %}
        <p class="warn">‚ö† Supplier requires review</p>
    {% else %}
        <p class="bad">‚ùå Supplier failed pre-qualification</p>
    {% endif %}
</div>

<!-- ================= RISK ================= -->
{% if result.risk_level %}
<div class="box">
    <h2>2Ô∏è‚É£ Risk Intelligence</h2>

    <p><b>Risk Level:</b> {{ result.risk_level }}</p>
    <p><b>Risk Score:</b> {{ result.risk_score }}</p>

    <p><b>Explanation:</b></p>
    <p>{{ result.risk_explanation }}</p>

    {% if result.risk_sources %}
    <p><b>Sources:</b></p>
    <ul>
        {% for src in result.risk_sources %}
        <li><a href="{{ src }}" target="_blank">{{ src }}</a></li>
        {% endfor %}
    </ul>
    {% endif %}
</div>
{% endif %}

<!-- ================= AGENT LOGS ================= -->
<div class="box">
    <h3>üß† Agent Reasoning</h3>
    <ul>
        {% for log in result.agent_logs %}
        <li>{{ log }}</li>
        {% endfor %}
    </ul>
</div>

<!-- ================= NEXT STEP ================= -->
{% if result.workflow_status == "PAUSED" %}
<div class="box">
    <h2>3Ô∏è‚É£ Next Step</h2>
    <p>{{ result.pause_reason }}</p>

    <form action="/documents/upload" method="get">
        <button type="submit">üìÑ Proceed to Document Upload</button>
    </form>
</div>
{% endif %}

<hr>

<a href="/">‚¨Ö Register Another Supplier</a>

</body>
</html>
